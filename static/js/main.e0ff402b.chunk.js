(window["webpackJsonpmpharma-cha"]=window["webpackJsonpmpharma-cha"]||[]).push([[0],{29:function(e,t,a){e.exports=a(57)},34:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),c=a.n(r),o=(a(34),a(13)),i=a(4),s=a(2),d="LOAD_PRODUCTS",u="ADD_PRODUCT",m="REMOVE_PRODUCT",p={products:[]},h=Object(i.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{products:t.items};case u:return{products:[].concat(Object(s.a)(e.products),[t.item])};case m:return{products:e.products.filter(function(e){return e.id!==t.id})};default:return e}}}),g=a(27);var b=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"navbar"},l.a.createElement("span",{className:"navbar-brand"},"mPharma")))},E=a(6),f=a(7),v=a(9),S=a(8),N=a(10),w=a(28),O=a.n(w);function y(e){return{type:d,items:e}}var C=a(12),j=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",price:""},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.addProduct(a.state.name,a.state.price),a.setState({name:"",price:""}),a.props.toggle()},a}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.price;return l.a.createElement("div",null,this.props.modalState&&l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("span",{onClick:this.props.toggle,className:"close"},"\xd7"),l.a.createElement("h2",null,"ADD NEW DRUG")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"fname"},"Name:"),l.a.createElement("input",{type:"text",id:"fname",name:"name",placeholder:"Name of drug..",onChange:this.handleChange,value:t,required:!0}),l.a.createElement("label",{htmlFor:"price1"},"Price:"),l.a.createElement("input",{type:"text",id:"price1",name:"price",placeholder:"Price..",onChange:this.handleChange,value:a,required:!0}),l.a.createElement("input",{type:"submit",value:"Add"}))))))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(l)))).state={name:"",price:""},a.handleChange=function(e){a.setState(Object(C.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,l=t.price;a.props.editProduct(n,l,a.props.selectedRow.id),a.props.toggle()},a}return Object(N.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.selectedRow.name;if(void 0!==this.props.selectedRow.id)var t=this.props.getLatestDate(this.props.selectedRow);this.editPreset(e,t)}},{key:"editPreset",value:function(e,t){this.setState({name:e,price:t})}},{key:"render",value:function(){return l.a.createElement("div",null,this.props.modalState&&l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("span",{onClick:this.props.toggle,className:"close"},"\xd7"),l.a.createElement("h2",null,"EDIT DRUG")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"fname"},"Name:"),l.a.createElement("input",{type:"text",id:"fname",name:"name",placeholder:"Name of drug..",onChange:this.handleChange,value:this.state.name,required:!0}),l.a.createElement("label",{htmlFor:"price1"},"Price:"),l.a.createElement("input",{type:"text",id:"price1",name:"price",placeholder:"Price..",onChange:this.handleChange,value:this.state.price,required:!0}),l.a.createElement("input",{type:"submit",value:"Submit"}))))))}}]),t}(n.Component),D=function(e){return l.a.createElement("div",null,e.modalState&&l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{style:{backgroundColor:"#FF3547",marginBottom:"0"},className:"modal-header"},l.a.createElement("span",{onClick:function(t){return e.toggle(!1)},className:"close"},"\xd7"),l.a.createElement("h2",null,"DELETE")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("p",{className:"warn-words"},"Are you sure to delete selected row?")),l.a.createElement("div",{className:"delete-btns"},l.a.createElement("button",{onClick:function(){e.deleteProduct(e.selectedRow.id),e.toggle(!0)},style:{backgroundColor:"#ff3547"},className:"delete-options"},"Yes"),l.a.createElement("button",{onClick:function(t){return e.toggle(!1)},style:{backgroundColor:"#444551"},className:"delete-options"},"No")))))},P=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(v.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(l)))).state={addmodal:!1,editmodal:!1,deletemodal:!1,rowSelect:null,selectedRow:[],disablebtn:!0},a.addtoggle=function(){a.setState(function(e){return{addmodal:!e.addmodal}})},a.edittoggle=function(){a.setState(function(e){return{editmodal:!e.editmodal}})},a.deletetoggle=function(e){a.setState(function(t){return{deletemodal:!t.deletemodal,disablebtn:!!e}})},a.handleSelect=function(e,t){e&&t.currentTarget&&(e.id-1!==a.state.rowSelect?a.setState({rowSelect:e.id-1,selectedRow:e,disablebtn:e.id-1===a.state.rowSelect}):a.setState({rowSelect:null,disablebtn:!0}))},a}return Object(N.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.loadProducts()}},{key:"getLatestDate",value:function(e){var t,a=e.prices.map(function(e){return e.date=new Date(e.date),e});do{t=!1;for(var n=0;n<a.length-1;n++)if(a[n].date>a[n+1].date){var l=a[n];a[n]=a[n+1],a[n+1]=l,t=!0}}while(t);return a[a.length-1].price}},{key:"render",value:function(){var e=this,t=this.props.products.map(function(t){return t.id&&l.a.createElement("tr",{style:{backgroundColor:t.id-1===e.state.rowSelect?"#a4d4ff":""},onClick:e.handleSelect.bind(e,t),key:t.id},l.a.createElement("td",null,t.name),l.a.createElement("td",null,e.getLatestDate(t)))});return l.a.createElement("div",null,l.a.createElement("div",{className:"head-text"},l.a.createElement("p",null,"".concat(this.state.disablebtn?"No":"1"," row selected"))),l.a.createElement("div",{className:"button-container"},l.a.createElement("div",{className:"button-container-sub"},l.a.createElement("button",{style:{backgroundColor:"#ffbb33"},className:"button",onClick:this.addtoggle},"Add")),l.a.createElement("div",{className:"button-container-sub"},l.a.createElement("button",{style:{backgroundColor:"#ffbb33"},className:"button",disabled:this.state.disablebtn,onClick:this.edittoggle},"Edit")),l.a.createElement("div",{className:"button-container-sub"},l.a.createElement("button",{style:{backgroundColor:"#FF3547"},className:"button",disabled:this.state.disablebtn,onClick:this.deletetoggle},"Delete"))),l.a.createElement("div",null,l.a.createElement("div",{className:"table-row"},l.a.createElement("div",{className:"table-row-col"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Price"))),l.a.createElement("tbody",null,t))))),l.a.createElement(j,{modalState:this.state.addmodal,toggle:this.addtoggle,addProduct:this.props.addProduct}),this.state.editmodal&&l.a.createElement(k,{modalState:this.state.editmodal,toggle:this.edittoggle,selectedRow:this.state.selectedRow,getLatestDate:this.getLatestDate,editProduct:this.props.editProduct}),this.state.deletemodal&&l.a.createElement(D,{modalState:this.state.deletemodal,toggle:this.deletetoggle,selectedRow:this.state.selectedRow,deleteProduct:this.props.deleteProduct}))}}]),t}(n.Component),R=Object(o.b)(function(e){return{products:e.products.products}},{loadProducts:function(){return function(e){return new Promise(function(t,a){O.a.get("https://www.mocky.io/v2/5c3e15e63500006e003e9795").then(function(t){var a=t.data.products;localStorage.getItem("products")||localStorage.setItem("products",JSON.stringify(a)),e(y(JSON.parse(localStorage.getItem("products"))))}).catch(function(e){return console.log(e),a(e)})})}},addProduct:function(e,t){return function(a){var n=JSON.parse(localStorage.getItem("products")),l=Object(s.a)(n).length,r=Object(s.a)(n)[n.length-1].prices[Object(s.a)(n)[n.length-1].prices.length-1].id,c={id:++l,name:e,prices:[{id:++r,price:t,date:Date.now()}]},o=[].concat(Object(s.a)(n),[c]);localStorage.setItem("products",JSON.stringify(o)),a({type:u,item:c})}},editProduct:function(e,t,a){return function(n){var l=JSON.parse(localStorage.getItem("products")),r=l[a-1],c=Object(s.a)(l)[l.length-1].prices[Object(s.a)(l)[l.length-1].prices.length-1].id;r.name=e,r.prices=[].concat(Object(s.a)(r.prices),[{id:++c,price:t,date:Date.now()}]),l[a-1]=r,localStorage.setItem("products",JSON.stringify(l)),n(y(JSON.parse(localStorage.getItem("products"))))}},deleteProduct:function(e){return function(t){var a=JSON.parse(localStorage.getItem("products")),n=a[e-1];delete n.id,a[e-1]=n,localStorage.setItem("products",JSON.stringify(a)),t(function(e){return{type:m,id:e}}(e))}}})(P),_=Object(i.e)(h,Object(i.d)(Object(i.a)(g.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})),I=function(){return l.a.createElement(o.a,{store:_},l.a.createElement(b,null),l.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.e0ff402b.chunk.js.map